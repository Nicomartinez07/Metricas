generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(cuid())
  email         String   @unique
  name          String?
  dashboardLayout Json?  // <- AGREGAR ESTO para guardar el layout
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Survey {
  id          String      @id @default(cuid())
  createdAt   DateTime    @default(now())
  email       String
  serviceType ServiceType
  
  // Las 5 métricas
  conformidad      Int // ¿Qué tan conforme está con el servicio?
  atencionCliente  Int // Nivel de satisfacción con la atención al cliente
  satisfaccion     Int // ¿Qué tan satisfecho está con los aspectos del servicio?
  recomendacion    Int // ¿Qué tanto recomendaría nuestro servicio?
  experiencia      Int // Puntúe la experiencia en general
  
  // Promedio calculado (para queries más rápidas)
  promedioGeneral Float
  
  // Metadata
  source      String?  @default("google_forms")
  formId      String?
  
  @@index([createdAt])
  @@index([serviceType])
  @@index([createdAt, serviceType])
}

enum ServiceType {
  VENTA
  POSTVENTA
}